with "Alerts/Alerts.gpr";
with "ETT/ETT.gpr";
with "Functional_Monitoring/Functional_Monitoring.gpr";
with "ICD_Bodies/mmspoi/mmspoi_bodies.gpr";
with "ICD_Bodies/mmsmtd/mmsmtd_bodies.gpr";
with "Interface_and_Drivers/1553/mms_1553_bodies.gpr";
with "Interface_and_Drivers/VME/VME.gpr";
with "Mission_Data/Post_Flight_Data/Post_Flight_Data.gpr";
with "Mission_Data/Pre_Flight_Data/Pre_Flight_Data.gpr";
with "PCT/PCT.gpr";
with "Subsystem/Subsystem_bodies.gpr";
with "Subsystem/Digital_Video/Digital_Video.gpr";
with "../ss/ss_bodies.gpr";
with "../config.gpr";

project Mms is

  for Exec_Dir use ".";
  for Object_Dir use "build/obj";
  for Main use ("mms.ada");
  for Source_Files use ("mms.ada");
  for Languages use ("Ada", "C");
  
  package Naming is
    for Implementation ("mms") use "mms.ada";
  end Naming;
  
  -- No additional compiler switches required, simply use the common switches
  package Compiler is
    for Default_Switches ("ada") use Config.Compiler'Default_Switches("ada");
    for Default_Switches ("c") use Config.Compiler'Default_Switches ("c") ;
    for Default_Switches ("c++") use Config.Compiler'Default_Switches ("c++");
  end Compiler;

  package Builder is

    for Default_Switches ("ada") use ("-gnateDADACORE");

    case Config.OS is
      when "sparc-solaris" =>
        for Executable ("mms.ada") use "mms";

      when "x86-solaris" =>
        for Executable ("mms.ada") use "mms";

      when "Windows_NT" =>
        for Executable ("mms.ada") use "mms.exe";

    end case;

  end Builder;

  package Linker is
    case Config.OS is

      when "x86-solaris" =>
        for Default_Switches ("ada") use Linker'Default_Switches ("ada") & ("-lsocket", "-lnsl", "-lposix4", "-lm");

      when "sparc-solaris" =>
        for Default_Switches ("ada") use Linker'Default_Switches ("ada") & ("-lsocket", "-lnsl", "-lposix4");

      when "Windows_NT" =>
        for Default_Switches ("ada") use Linker'Default_Switches ("ada") & ("-lws2_32");
    end case;
  end Linker;

end Mms;

