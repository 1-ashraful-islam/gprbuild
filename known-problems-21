======================================
Known problems in GPRBUILD version 2.1
======================================

Copyright (C) 2013-2014, AdaCore

The following is a listing of known problems in releases 2.1.1 and 2.1.2.
Each entry contains a status line stating when the problem was fixed, and on
which release(s). In addition, any wavefront issued subsequent to the date
specified (in ISO format YYYY-MM-DD) also contains the fix. This can be used
to determine if a given release or wavefront has the fix identified in the
entry.

Note that older releases might or might not be affected by the problems listed
in this document.

Known problems fixed in 2.2.1 and above
---------------------------------------

KP-21-N407-018 Fail to clean-up remote slave with gpr protocol

  Problem:    When using the gpr protocol it is not possible to clean-up the
              remote slaves with gprclean.

  Status:     This was fixed in 2.2 on 2014-04-07

  Workaround: use the rsync protocol for cleaning-up the remote slaves.

KP-21-N331-007 Fail to compile large sources in distributed mode

  Problem:    When a project contains large sources or large objects
              gprbuild may fail during the compilation phase when using
              the gpr protocol.

  Status:     This was fixed in 2.2 on 2014-04-02

  Workaround: use the rsync distributed compilation protocol.

KP-21-N319-020 gprbuild fails with binder switch "-s"

  Problem:    When gprbuild is invoked with the binder switch "-s". the binding
              phase will fail as gnatbind is unable to find the sources.

  Status:     This was fixed in 2.2 on 2014-03-19

  Workaround: Do not use binder switch "-s" when using gprbuild.

KP-21-N318-025 gprinstall does not recognized -d option

  Problem:    The -d option (short version of --dry-run) is documented
              but not recognized by gprinstall.

  Status:     This was fixed in 2.2 on 2014-03-19

  Workaround: Uses --dry-run instead.

KP-21-N313-008 gprinstall fails with spec naming exception

  Problem:    When gprinstall is invoked to install a library project file
              that is not a Stand-Alone Library and there is a spec with
              a naming exception, the installation will fail.

  Status:     This was fixed in 2.2 on 2014-03-13

  Workaround: Avoid spec naming exceptions in library project file.

KP-21-N310-027 gprbuild wait indefinitely for some compilation results

  Problem:    If the Remote package Root_Dir attribute is not properly set
              gprbuild may not terminate.

  Status:     This was fixed in 2.2 on 2014-03-10

  Workaround: fix the Root_Dir attribute value.

KP-21-N207-022 Fail to compile sources in distributed mode

  Problem:    Top level sources (sources found at the project's root
              directory) will fail to compile on remote compilation slaves.

  Status:     This was fixed in 2.2 on 2014-02-07

  Workaround: do not use the distributed compilation mode

KP-21-N206-041 wrong permissions set by gprinstall for binaries

  Problem:    On UNIX, a binary installed with gprinstall will have the
              executable permission set only for the owner. This will prevent
              others to execute this binary. It is a problem when installing
              an application in a shared computer for example.

  Status:     This was fixed in 2.2 on 2014-02-06

  Workaround: change the permissions manually using chmod

KP-21-N120-075 gprclean -r and cycles in externally built projects

  Problem:    When there are several externally built projects in the project
              tree and some of them form a cycle, through limited withs,
              invoking gprclean with switch -r will result in a crash.

  Status:     This was fixed in 2.2 on 2014-01-21

  Workaround: Avoid circularities in externally built projects or invoke
              gprclean without switch -r.

KP-21-N103-018 Failure to link on target powerpc-xcoff-lynxos178

  Problem:    For target powerpc-xcoff-lynxos178, when there are two many
              object files to be linked, because a response file is not used,
              the linking phase may fail.

  Status:     This was fixed in 2.2 on 2014-01-06

  Workaround: Add these two lines in package Linker of the main project:
                for Response_File_Format use "GCC_GNU";
                for Max_Command_Line_Length use "8192";

KP-21-MB30-011 Garbled output from parallel invocations of gnatbind

  Problem:    When gprbuild is invoked with -jnn and there are several mains,
              several invocations of gprbind may be running in parallel and
              their displayed gnatbind invocations may be garbled.

  Status:     This was fixed in 2.2 on 2013-12-01

  Workaround: Ignore the problem or invoke gprbuild without -jnn.

KP-21-MB26-007 Dependency builder must be invoked from the object directory

  Problem:    When gprbuild performs parallel compilations and for some
              language a dependency builder is invoked to build a dependency
              file, the dependency builder may be invoked from the object
              directory of another project and thus may fail if some of its
              arguments are relative paths.

  Status:     This was fixed in 2.2 on 2013-11-27

  Workaround: Use absolute paths for the arguments of a dependency builder.

KP-21-MB05-034 gprinstall fails to install projects built with sub-dirs

  Problem:    gprinstall is not able to install a code which has been
              built with gprbuild's --subdirs option.

  Status:     This was fixed in 2.2 on 2013-11-05

  Workaround: Install the code manually.

KP-21-MA31-004 Aggregated libraries and externally built

  Problem:    gprbuild was not properly dealing with externally built
              projects on the dependencies. First it was trying to add the
              object code from such libraries and failed to pass the library
              on to the linker.

  Status:     This was fixed in 2.2 on 2013-11-01

  Workaround: Remove the externally built projects from the dependencies if
              possible and pass the corresponding library to the linker.

KP-21-MA30-041 Aggregated libraries and gprinstall

  Problem:    gprinstall was not properly handling aggregate libraries. The
              installation was failing and/or the generated project was not
              usable.

  Status:     This was fixed in 2.2 on 2013-11-02

  Workaround: Install the software using a script.

Known problems fixed in 2.1.2 and above
---------------------------------------

Known problems fixed in 2.1.1 and above
---------------------------------------

KP-21-MB06-054 gprinstall and shared library with version on windows

  Problem:    On Windows, gprinstall fails while installing a shared library
              project when the attribute Library_Version is defined.

  Status:     This was fixed in 2.2 on 2013-11-06
              This was fixed in 2.1.1 on 2013-11-27

  Workaround: Manually install the library.

KP-21-MB06-015 gprinstall and standalone libraries

  Problem:    gprinstall does not generate a usable project file for
              standalone libraries.

  Status:     This was fixed in 2.2 on 2013-11-06
              This was fixed in 2.1.1 on 2013-11-27

  Workaround: Manually adds the Library_Interface and Library_Standalone
              attributes.

KP-21-MB05-020 gprconfig does not detect non GNAT gcc C and g++ compilers

  Problem:    gprconfig does not find all non GNAT gcc C and g++ compilers.

  Status:     This was fixed in 2.2 on 2013-11-07
              This was fixed in 2.1.1 on 2013-12-10

  Workaround: Manually edit a configuration project file and use it with
              gprbuild.
